# 后端装备图片上传、分析部分

- server整体基于django，第一次用django...
- 识别图片是 eqprecog/recog.py，基于OpenCV3

## 图片分析识别
1. opencv边缘检测 - 矩形框选 - 过滤 - 分类 - 汇总 - 定位出装备槽位（先分类再汇总是为了优先挑出来质量高的，质量比数量更重要）
2. 因为图片质量原因，一般并不能定位出来的装备槽位 - 根据至少3个槽位，定位出装备共鸣所有槽位
   - 思路：装备共鸣槽旋转45度可以看做是田字格，田字格9个交点就是9个槽位
   - 9个点可以定位一个田字格，转为横三竖三6条线定位一个田字格，进而转化为最少3个点可以定位出6条线
3. 根据装备共鸣槽位计算出中心槽位坐标、槽位间距及槽位边长 - 定位出槽位四角区域、裁剪出装备图片
4. 四角区域内求平均色值 - 根据gbr分类出红、绿、黄、蓝四种颜色

欢迎PR

**Django需要python3，但是python3的OpenCV又比较难装，在Stack Overflow上总结出来，Windows、Ubuntu、Mac的OpenCV好装，其他的Linux发行版够呛，反正我用CentOS 7没搞定**